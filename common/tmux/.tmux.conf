# Tmux Configuration - Pimped Dotfiles Edition

## ============================================================================
## General Settings
## ============================================================================

# Enable mouse support
set -g mouse on

# Enable status bar
set -g status on

# Extended pane histories
set-option -g history-limit 10000

# Start window numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Enable RGB colour if running in xterm
set -g default-terminal "screen-256color"

## ============================================================================
## Key Bindings
## ============================================================================

# Set prefix key to Ctrl-A (like screen)
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Split panes with | and "
bind '|' split-window -h -c '#{pane_current_path}'
bind '"' split-window -v -c '#{pane_current_path}'

# Create new window in current path
bind c new-window -c '#{pane_current_path}'

# Fast pane resizing (can hold arrow keys)
bind -n C-S-Up resize-pane -U 1
bind -n C-S-Down resize-pane -D 1
bind -n C-S-Left resize-pane -L 1
bind -n C-S-Right resize-pane -R 1

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Reload config
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

## ============================================================================
## Copy Mode
## ============================================================================

# Use vim keybindings in copy mode
setw -g mode-keys vi

# Vim-style copy/paste
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# Fix mouse scrolling
bind -n WheelUpPane if-shell -Ft= '#{?pane_in_mode,1,#{mouse_any_flag}}' \
        'send -Mt=' 'if-shell -Ft= "#{alternate_on}" \
        "send -t= Up" "copy-mode -et="'
bind -n WheelDownPane if-shell -Ft = '#{?pane_in_mode,1,#{mouse_any_flag}}' \
        'send -Mt=' 'if-shell -Ft= "#{alternate_on}" \
        "send -t= Down" "send -Mt="'

## ============================================================================
## Status Bar
## ============================================================================

# Update status bar every second
set -g status-interval 1

# Center window list
set -g status-justify centre

# Status bar colors
set -g status-style fg=white,bg=black

# Window status colors
setw -g window-status-style fg=cyan,bg=black
setw -g window-status-current-style fg=black,bg=cyan,bright

# Pane border colors
set -g pane-border-style fg=white
set -g pane-active-border-style fg=cyan

# Status bar left: session name
set -g status-left-length 40
set -g status-left "#[fg=green]Session: #S #[fg=yellow]#I #[fg=cyan]#P"

# Status bar right: date and time
set -g status-right "#[fg=cyan]%d %b %R"

## ============================================================================
## Personal Profile
## ============================================================================

# Respect user configs in $TMUX_PERSONAL_PROFILE
if-shell "[ -f ~/.tmux.profile ]" "source-file ~/.tmux.profile"
